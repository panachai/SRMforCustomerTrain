@using SRMforCustomer.Models

@model SRMforCustomer.Models.RequestsModel

@{
    Layout = null;
}

@*@if (Model != null) {

    <h1>
        Success
    </h1>

    <h2>
        show model id : @Model.ReTicketID
    </h2>


} else {*@

    <div class="row input_content">
        <form>
            <div class="row">
                <div class="col-sm-6">
                    <div class="valueinfo">ชื่อ-นามสกุล</div>
                    <input type="text"  oninput="this.value = this.value.replace(/[0-9]/g, ''); this.value = this.value.replace(/^\s+/, '');" id="name" class="input">
                </div>
                <div class="col-sm-6">
                    <div class="valueinfo">ประเภทการร้องขอ</div>
                    <select id="needhelp"  class="input">
                        <option disabled="disabled" selected="selected">กรุณาเลือกการร้องข้อมูล</option>
                        <option value="ข้อมูลที่1">เลือกข้อมูล1</option>
                        <option value="ข้อมูลที่2">เลือกข้อมูล2</option>
                        <option value="ข้อมูลที่3">เลือกข้อมูล3</option>
                        <option value="ข้อมูลที่4">เลือกข้อมูล4</option>
                        <option value="ข้อมูลที่5">เลือกข้อมูล5</option>
                        <option value="ข้อมูลที่6">เลือกข้อมูล6</option>
                    </select>
                </div>
            </div>
            <div class="row input_padding">
                <div class="col-sm-6">
                    <div class="valueinfo">เบอร์โทร</div>
                    <input id="phone" class="input" type="text" oninput="this.value = this.value.replace(/[^0-9.]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');">
                </div>
                <div class="col-sm-6">
                    <div class="valueinfo">อีเมล</div>
                    <input type="email" id="email" oninput=" this.value = this.value.replace(/^\s+/, '');" class="input">
                </div>
            </div>
            <div class="row" style="padding-top:50px;">
                <div class="valueinfo" style="padding-left:16px;">รายละเอียด</div>
                <textarea style="width:97%;height:100px;" id="detail" oninput=" this.value = this.value.replace(/^\s+/, '');"></textarea>
            </div>
        </form>
        <div style="padding-top:15px;">
            <button class="button" id="sendEmail"> ส่งข้อมูล </button>
        </div>
    </div>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.6.5/sweetalert2.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.6.5/sweetalert2.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.6.5/sweetalert2.js"></script>
@*}*@

<script>
    $(document).ready(function () {
        $("#sendEmail").click(function () {
            setfeedback();
        });
    });
    function setfeedback() {
        var model = {
            name: $('#name').val(),
            needhelp: $('#needhelp').val(),
            phone: $('#phone').val(),
            email: $('#email').val(),
            detail: $('#detail').val()
        };
        console.log($('#MessageForm').serialize());
        console.log(model);
        jQuery.ajax({
            type: "POST",
            url: "@Url.Action("receiveMessage", "Requests")",
            dataType: "json",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify(model),
        success: function (response) {
            if (response != null && response.success) {
                swal("Ticket ของท่านคือ xxxxxxxxxx", "สามารถตรวจสอบการทำงานได้ที www.imc.co", "success");
            } else {
                swal("ไม่สำเร็จ", "กรุณาระบุข้อมูลให้ถูกต้อง ครบถ้วน", "error");
            }
        },
        failure: function (errMsg) {
            swal("ยกเลิก", "กรุณาระบุข้อมูลให้ถูกต้อง, ระบุข้อมูลให้ครบ", "error");
        }
    });
    }
</script>

