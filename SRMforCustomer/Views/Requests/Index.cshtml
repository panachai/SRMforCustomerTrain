
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";

    AjaxOptions options = new AjaxOptions {
        UpdateTargetId = "requestsResult",
        InsertionMode = InsertionMode.Replace
    };
}


    <style>
        /*canvas * {
            padding: 0;
            margin: 0;
        }

        canvas {
            display: block;
            background: black;
        }*/

        /*--------------------------------------*/
        .input_padding {
            padding-top: 50px;
        }

        .valueinfo {
            text-align: left;
            color: rgba(0, 0, 0, 0.7);
        }

        input,select {
            height: 30px;
            width: 100%;
        }

        html {
            height: 100%;
        }

        .input_content {
            padding-top: 50px;
            text-align: center;
            padding-left: 170px;
            padding-right: 170px;
        }

        @@media screen and (max-width: 767px) {
            .input_content {
                padding-left: unset;
                padding-right: unset;
            }

            .row > .col-sm-6 {
                padding-top: 15px;
            }

            .input_padding {
                padding-top: unset;
            }

            .input_content {
                padding-top: 50px;
            }
        }
    </style>

    @*<canvas id="c" style="width: 100%;height:200px;"></canvas>*@
    <div class="head_title">
        Requsets
    </div>


@using (Ajax.BeginForm("RequestsPartial", options)) {
    <div class="row">
        <div>
            @Html.TextBox("keyword", null, new { type = "number"})

            <button type="submit">Search</button>
        </div>
        
    </div>
}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.6.5/sweetalert2.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.6.5/sweetalert2.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.6.5/sweetalert2.js"></script>

<script>
    $(document).ready(function () {
        $("#TT").click(function () {
            setfeedback();
        });
    });
    function setfeedback() {
        var model = {
            Name: $('#name').val(),
            Phone: $('#needhelp').val(),
            Email: $('#phone').val(),
            Message: $('#email').val(),
            Message: $('#detail').val()
        };
        console.log($('#MessageForm').serialize());
        console.log(model);
        jQuery.ajax({
            type: "POST",
            url: "@Url.Action("receiveMessage", "Requests")",
            dataType: "json",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify(model),
        success: function (response) {
            if (response != null && response.success) {
                swal("เรียบร้อย", "เราจะติดต่อกลับภายใน 1 วันทำการ", "success");
            } else {
                swal("ไม่สำเร็จ", "กรุณาระบุข้อมูลให้ถูกต้อง ครบถ้วน", "error");
            }
        },
        failure: function (errMsg) {
            swal("ยกเลิก", "กรุณาระบุข้อมูลให้ถูกต้อง, ระบุข้อมูลให้ครบ", "error");
        }
    });
    }
</script>

   
<div id="requestsResult">
    @Html.Action("RequestsPartial", new { keyword = "" })
</div>



@section scripts{
    <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
}


@*//////////////////////////////////////////////////*@
@*<script>
    ; (function () {

        'use strict';

        var c = document.getElementById('c');
        var ctx = c.getContext('2d');
        var w = c.width = window.innerWidth;
        var h = c.height = window.innerHeight;
        var itr = 100;
        var s = 30;
        var off = 0;

        requestAnimationFrame(function loop() {
            requestAnimationFrame(loop);

            ctx.fillStyle = 'rgba(0, 0, 0, 0.04)';
            ctx.fillRect(0, 0, w, h);

            off += 0.5;

            for (var i = 0; i < itr; i++) {

                var x = Math.random() * w;
                var y = Math.random() * h;
                var gx = Math.floor(x / s) * s;
                var gy = Math.floor(y / s) * s;
                var scl = Math.random();
                var c = (gx + gy) / (w + h);

                ctx.save();
                ctx.translate(gx, gy);
                ctx.rotate(Math.random() * Math.PI * 2);
                ctx.scale(scl, scl);

                ctx.beginPath();
                ctx.fillStyle = 'hsl(' + (c * 200 + off) + ', 100%, 50%)';
                ctx.arc(0, 0, s / 2, 0.25 * Math.PI, 1.25 * Math.PI);
                ctx.fill();

                ctx.beginPath();
                ctx.arc(0, 0, s / 2, 0.75 * Math.PI, 1.75 * Math.PI);
                ctx.fill();

                ctx.restore();
            }
        });




    })();
</script>*@